# ANU TechLauncher - Travel Emissions Tool

Project Landing Page: [Travel Emissions Tool - Landing Page](https://co2indexanu.wixsite.com/travel-emission-tool)

## Project Overview

In the face of mounting concerns over environmental sustainability, the Travel Emissions Tool emerges as a pivotal tool designed to mitigate the carbon footprint associated with travelling to conferences. Recognising the significant contribution of air travel to global carbon emissions, the Travel Emissions Tool offers a comprehensive solution aimed at empowering conference organisers with the ability to assess and optimise the ecological impact of their events. By implementing a strong algorithm within an intuitive and user-friendly webpage, the Travel Emissions Tool facilitates the calculation of CO2 emissions generated by conference participants' travel, considering their diverse points of origin. Thus, aiding strategic planning of conference locations but also aligning with the growing demand for responsible event organisation.

### Problematisation Summary

The core issue revolves around the traditional model of conferences, which necessitates physical attendance, fostering extensive travel and its associated high carbon footprint. This practice not only contributes significantly to environmental degradation but also perpetuates disparities by favouring those who may be able to afford travel costs, potentially excluding valuable contributions from less affluent participants.

The introduction of the Travel Emissions Tool aims to mitigate these environmental impacts by enabling assessments of travel-related carbon emissions and encouraging the conference hosts/organisers to reconsider conference locations and modes based environmental impact. However, this tool's effectiveness is contingent upon accurate data collection across variable factors (e.g., transport mode, distance, fuel used etc.) and the conference communitys' readiness to embrace change, which may be hindered by institutional inertia and traditional preferences for fixed conference venues. [Read more...](https://docs.google.com/document/d/1mv1jIl03T8qIav5r7o7KyBiICeETOmOvydyjsphXmJ0/edit)

## Repository Walkthrough

`ctetproject/`

The root directory of the project. It's the main container for the Django project.

`ctetproject/`

Actual python package for the project. It is where the settings and main configurations live.

* `init.py`: An empty file that tells python that this directory should be treated as a Python package.
* `asgi.py`: Provides an entry point for ASGI-compatible web servers to serve CTET, useful for asynchronous functionality. Doesn't concern the project too much at this stage.
* `settings.py`: Contains all the configuration for the project, including database settings, security keys, and applications config. Will be used as we progress.
* `urls.py`: Defines the URL declarations for the project; this where we "wire" our `views` to URLs. Sort of like the table of contents for the website.
* `views.py`: Main python file to handle the backend logic of the website. For example, this is used to handle CSV parser upon user uploads.
* `wsgi.py`: Provides an entry point for WSGI-compatible web servers to serve our project, essentially used for deployment.
* `tests/`: This directory contains a collection of unit tests that are used to verify the accuracy and robustness of the emissions algorithm.

`frontend/`

This is the frontend app for our project, it uses ReactJS. This is where we will develop frontend designs and features specific to our website.

* `src`: Contains the source code for our frontend react application.

  * `App.js`: The main React component that serves as the entry point for our React interface.
  * `Componenets/`: This directory contains all the different components that will be 'glued' together in the react frontend. This a key feature in react as it is a component-based architecture system.
  * `App.test.js`: Contains tests for `App.js` component.
  * `index.js`: The JS entry point that renders the react app using `ReactDOM`.
  * Other: `reportWebVitals.js`, `setupTests.js`, for logging and setting testing envrionments.

`testing/`

* This folder has the automated and unit tests for this project.
* Inside this folder there is another folder called testingcsv which has all the csv's used for testing.
* The pytest.ini file in the root folder allows the tests to be run under the command "pytest". This can be run in the root folder 'ctetproject' and the testing folder
* The pytest.ini file is written so that files ending with "test.py" are the only ones done with the pytest command. Only unit tests are written in this format.
* The automated tests that use Selenium do not have "test.py" at the end of their file name.

Please see the testing section below to run our testing framework.

`ctetproject/manage.py`

A command-line utility that allows us to interact with the Django project in various ways. For example, you can use it to run the development server, sync the database and for running tests.

Developers, please view the `dev_installation.md` for instructions.

---

## Installation

1. Clone the CTET repository into your desired location.

   ```
   git clone https://gitlab.cecs.anu.edu.au/u7287889/anu-techlauncher-travel-impact-tool.git
   ```
2. Install the dependencies.

   ```
   pip install -r requirements.txt
   ```
3. Launch backend localhost server.

   ```
   cd ctetproject/
   python manage.py runserver
   ```
4. In an alternative terminal, launch the website localhost.

   ```
   cd ctetproject/frontend/
   npm start
   ```

## Testing Framework & Execution

**If you would like to execute all tests, including the automated tests which will require some time, please execute the following command from the root directory:**

```
./tests.sh
```

Otherwise, you can execute items compartmentally using the instructions below.

##### BACKEND

###### Standalone Emissions Algorithm Testing

Following aspects of the emissions algorithm (`ctetproject/ctetproject/emissions_algo.py`) has been tested:

**API and Geolocation Handling** - API response validation, geolocation failures with mock data.

**Data Integrity and Condition** - computation of distances and emissions - boundary tests of flight categories (short haul/long haul etc.). Testing zero and negative values.

**Caching Mechanism** - evaluating caching effectiveness by checking for unnecessary API calls

**Input Validation** - input types, non-string city names - empty input scenarios etc.

*How to execute the tests:*

1. Navigate to the backend directory. Todo this, while inside the root of the repository, execute:

   ```
   cd ctetproject/
   ```

   Once inside the directory, you should be able to see a python file named `manage.py`.
2. Execute backend testing:

   ```
   python manage.py test ctetproject/
   ```

---

##### FRONTEND & HYBRID

###### Automated Tests

To run the full pipeline and other automated tests of the CTET tool follow the following instructions:

Similar to the *installation* section, please launch the backend server and the website.

```
Launch backend localhost server:
cd ctetproject/
python manage.py runserver

In an alternative terminal, launch the website localhost:
cd ctetproject/frontend/
npm start
```

1. While the backend and frontend website servers are running, open a new terminal and navigate to the `testing/` directory:

   ```
   cd ctetproject/testing/
   ```
2. Execute the automated tests one-by-one:

   ```
   python testing_automated_full_pipeline.py
   ```

   ```
   python testing_automated_manual_entry.py
   ```

   ```
   python testing_automated_csv.py
   ```

   Each of these executions will open up your default browser and perform the automated usage scenario. Be patient as it may take some time depending on your machine performance.

   Feel free to shutdown the localhost servers upon completion.

###### Unit Tests

From the root directory, navigate to the following directory:

```
cd ctetproject/
```

Then execute the tests by running the following command:

```
pytest
```

## Tech-Stack Introduction

Full Tech-Stack research and justification document can be found [here](https://docs.google.com/document/d/1UnLRnXmW2PSrgQ18GIVt_LTlBGbwnZAgDI9Yb7_5MJA/edit).

The Conference Travel Emissions Tool is built upon a Django rest framework which utilises ReactJS for frontend development.

Combining Django on the backend with React on the frontend offers a cohesive development environment. This synergy enables rapid development, scalability, and enhanced user experience. Django's backend capabilities seamlessly integrate with React's component-based architecture, ensuring efficient communication between the server and client sides. With strong community support and extensive ecosystems, this tech stack accelerates development, fosters scalability, and ensures maintainability for the Conference Travel Emissions Tool. This Tech-Stack is highly suitabe for CTET's minimum viable project goals and will also assist in future extensions as we aim to implement the database.
